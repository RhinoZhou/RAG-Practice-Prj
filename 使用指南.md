# Medi-RAG 系统使用指南

## 系统状态说明

### 🚨 重要通知
**Gradio界面暂时无法使用**，因为Python 3.13与Gradio 5.x存在严重的兼容性问题。

### ✅ 推荐解决方案
使用**命令行界面(CLI)**代替Gradio，所有功能都已完整实现！

## 命令行界面使用方法

### 1. 启动交互式模式
```bash
python cli_full.py
```

### 2. 单次查询模式
```bash
python cli_full.py --mode single --question "什么是糖尿病？" --kb default
```

## 交互式命令说明

### 知识库管理命令
| 命令 | 功能 | 示例 |
|------|------|------|
| `kb list` | 列出所有知识库 | `default> kb list` |
| `kb create <名称>` | 创建新知识库 | `default> kb create test` |
| `kb delete <名称>` | 删除知识库 | `default> kb delete test` |
| `kb use <名称>` | 切换知识库 | `default> kb use test` |
| `kb show` | 显示当前知识库 | `default> kb show` |
| `kb add <文件路径>` | 添加文件到当前知识库 | `default> kb add PDF/糖尿病.pdf` |
| `kb files` | 查看当前知识库文件 | `default> kb files` |

### 问答命令
| 命令 | 功能 | 示例 |
|------|------|------|
| `ask <问题>` | 简单检索回答 | `default> ask 什么是糖尿病？` |
| `ask --multi-hop <问题>` | 多跳推理回答 | `default> ask --multi-hop 糖尿病的并发症有哪些？` |
| `ask --table <问题>` | 表格格式回答 | `default> ask --table 高血压的治疗方法？` |

### 其他命令
| 命令 | 功能 | 示例 |
|------|------|------|
| `help` | 查看帮助文档 | `default> help` |
| `exit`/`quit` | 退出程序 | `default> exit` |

## 系统功能特点

### ✅ 已实现功能
1. **完整的知识库管理**：
   - 创建、删除、切换知识库
   - 支持TXT和PDF文件上传
   - 查看知识库文件列表

2. **强大的问答功能**：
   - 语义检索（简单查询）
   - 多跳推理（复杂问题）
   - 表格格式输出（结构化信息）
   - 详细的处理时间统计

3. **用户友好的界面**：
   - 彩色输出，清晰的视觉提示
   - 详细的命令帮助文档
   - 两种运行模式满足不同需求

### ❌ 暂时不可用的功能
- **Gradio Web界面**：由于Python 3.13与Gradio 5.x的兼容性问题
- **app.py**和**simple_gradio_ui.py**：依赖Gradio的界面脚本

## 系统配置

### 配置文件
- **config.py**：包含所有系统配置
- **知识库根目录**：knowledge_bases/
- **默认知识库**：default
- **PDF示例文件**：PDF/目录下

### 依赖管理
- **requirements.txt**：包含所有依赖包
- 首次运行时会自动安装依赖
- 支持使用镜像源加速安装

## 常见问题解答

### Q: 为什么Gradio界面无法使用？
A: Python 3.13与Gradio 5.x存在严重的兼容性问题，程序在导入Gradio时会无错误地停止运行。

### Q: 命令行界面功能完整吗？
A: 是的，命令行界面包含了Gradio界面的所有功能，包括知识库管理、问答功能等。

### Q: 如何查看帮助文档？
A: 在交互式模式下输入`help`，或使用`python cli_full.py --help`查看命令行参数帮助。

### Q: 如何添加PDF文件到知识库？
A: 使用`kb add <文件路径>`命令，例如：`kb add PDF/糖尿病.pdf`

### Q: 多跳推理和简单检索有什么区别？
A: - **简单检索**：直接从知识库中查找相关信息
   - **多跳推理**：通过多轮查询，将多个相关信息关联起来，回答更复杂的问题

## 系统结构

```
Medi-RAG/
├── cli_full.py          # 命令行界面（推荐使用）
├── rag.py               # 核心RAG功能模块
├── config.py            # 系统配置
├── requirements.txt     # 依赖包列表
├── PDF/                 # 示例PDF文件
├── knowledge_bases/     # 知识库目录
│   ├── default/         # 默认知识库
│   └── example/         # 示例知识库
└── 修复总结.md         # 详细的修复说明
```

## 技术支持

如果遇到问题，请查看：
1. **修复总结.md**：详细的问题分析和解决方案
2. **cli_full.py**：命令行界面完整代码
3. **config.py**：系统配置文件

## 未来计划

1. 等待Gradio官方修复Python 3.13兼容性问题
2. 更新Gradio界面代码，支持最新版本的Gradio
3. 增强命令行界面的功能和用户体验
4. 添加更多的文档和示例

---

**Medi-RAG 系统 v1.0.0**
**更新时间**：2025-11-19
**开发团队**：AI助手